# KataGo 主要機能・解析データ 詳細レポート

## 1. 概要
KataGoは、従来の囲碁AI（AlphaGo Zero方式）をベースにしつつ、独自のネットワーク構造と学習手法により、「人間への指導能力」と「柔軟なルール対応」を極限まで高めた世界最高峰の囲碁解析エンジンです。単なる「最強の打ち手」に留まらず、局面を多角的な数値データとして出力する能力に長けています。

## 2. コア解析指標

### ① Winrate (勝率)
*   **定義**: 現在の局面から互いに最善を尽くした場合に、最終的に勝ち越す確率（0.0 〜 1.0）。
*   **特徴**: 当システムでは、常に「黒番視点」に正規化して利用。形勢の有利・不利を判断する最も直感的な指標です。

### ② ScoreLead (期待目数差)
*   **定義**: 終局時に黒がリードしていると予想される目数の期待値。
*   **重要性**: 
    *   勝率が100%に近い局面でも、「何目得したか」を評価できる唯一の指標。
    *   ミスの「大きさ（深刻度）」を具体的な損得（例：15目損）として定量化可能。
    *   ヨセの精緻な解析に不可欠。

### ③ ScoreStdev (目数差の標準偏差)
*   **定義**: 最終的な目数差の予測における「ブレ（不確実性）」。
*   **活用例**: 
    *   値が高い場合：死活が未解決、あるいは激しい戦いで一手のミスが巨大な損得に繋がる「紛れた局面」。
    *   値が低い場合：形勢が定まり、大きな変化が起きにくい「平穏な局面」。

## 3. 高度な解析機能

### ① Ownership (地の所有権 / 支配力)
*   **内容**: 盤上の361目（19路盤の場合）の各交点が、最終的にどちらの「地」になるかの確率。
*   **効果**: 
    *   盤面を「境界線」で区切る大局観。
    *   「確定地」「不安定な石（浮石）」「攻防の焦点」を可視化。
    *   Geminiに「この一帯は既に相手の勢力圏です」といった、空間的な解説をさせる根拠となる。

### ② Principal Variation (PV / 最善の変化図)
*   **内容**: AIが予測する最善の手順。
*   **複数提示**: `analysis` モードでは、最善手だけでなく第2候補、第3候補などの変化図を同時に出力可能。
*   **比較解析**: 候補手Aと候補手BのPVを比較することで、「なぜAの方が優れているのか」を論理的に導き出せる。

### ③ Policy (ポリス / 第一感)
*   **内容**: 探索（先読み）を行わずに、ニューラルネットワークが「直感的に」良いと判断する確率。
*   **特徴**: 石の「形」や「筋」の良さを反映しており、読みの深さとは別の「囲碁の美学」に近い指標。

## 4. ルールと柔軟性

### ① ダイナミック・コミ (Dynamic Komi)
*   解析中にコミ（ハンデ）を自由に変更可能。
*   置碁（ハンデ戦）の正確な解析をサポート。

### ② 多様なルールセット
*   日本ルール、中国ルール、トロンルール、AGAルールなどに対応。
*   「ダメに価値があるか」「死活の特例」などのルール依存の判定を正確に行う。

## 5. 本システムでの活用方針
当システムでは、これらのデータを以下のようにGeminiへ流し込み、「論理的解説」を生成します。

1.  **幾何学的事実 (ShapeDetector)** と **ScoreLead** を組み合わせ、悪形による具体的な損害を解説。
2.  **PV** を仮想盤面で再現し、将来の形状変化を予測（Rev. 11.1で実装）。
3.  (今後の課題) **Ownership** を導入し、地の増減に基づいた戦略的な物語を構築。

---
rev. 1.0 (2026-01-10)
