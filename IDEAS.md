# 囲碁AI解説システム アイデア・ストック (IDEAS.md)

このファイルは、システムのさらなる進化のための改善案や新機能のアイデアを蓄積・管理するバックログです。

## 1. 視覚的・分析的強化 (Visual & Analytical)
- [ ] **地の勢力可視化 (Ownership Map)**: 盤上の黒地・白地の勢力圏を半透明で可視化し、大局観をサポート。
- [x] **勝率推移グラフの動的表示**: メインUIにmatplotlib等のグラフを埋め込み、形勢の波を一目で把握可能に。
- [x] **石の強弱スコアリング**: Ownershipデータから五段階の生存ステータスを定義。 (Rev 37.0 完了)

## 2. インタラクティブ・学習 (Interactive Learning)
- [x] **AI推奨図の連番表示**: PVを表示する際、現在の検討モードの仕組みを流用して石に手順番号を振る。
- [x] **成功・失敗図の同時ポップアップ**: 緊急局面において、最善進行と放置被害を並べて自動表示。 (Rev 33.0 完了)
- [ ] **座標ハイライト連携**: Geminiの解説文内の座標をクリックすると、盤上の該当位置が点滅・プレビュー。

## 4. 知識ベース・アルゴリズム (Knowledge & Algorithms)
- [x] **カス石取りの検知**: Ownership 0.8以上の死に石への干渉を捕捉。 (Rev 37.0 完了)
- [x] **死に石の言語的定義**: LLMに「弱い石」と「死に石（カス石）」を明確に区別させる指示を追加。 (Rev 37.0 完了)
- [x] **形状検知の完全データ化**: 全ての形状を JSON で定義。 (Rev 35.0 完了)

## 6. リファクタリング・堅牢化 (Refactoring & Robustness)
- [x] 解析ロジックの独立化 (Orchestrator): 解析指揮官を導入し、AI解説と解析層を完全に分離。 (Rev 35.0 完了)
- [x] 知能の構造化 (InferenceFact): 解析事実を重要度順にトリアージする仕組み。 (Rev 34.0 完了)
- [x] シミュレーション・コンテキストの導入: 局面状態を一元管理する SimulationContext の導入。 (Rev 34.0 完了)
- [x] レポート生成の整合性修正: 形状検知を「着手後」の盤面で行うように修正。 (Rev 37.0 完了)
- [x] **盤面座標・石色の正規化レイヤー**: `GameBoard` クラスと `Color` Enum の導入により、型の安全性と可読性を確保。 (Rev 38.0 完了)
- [x] **非同期処理の分離**: `AsyncTaskManager` の導入により、`app.py` のスレッド管理をサービス化。 (Rev 39.0 完了)
- [ ] **解説人格 (Persona) のストラテジーパターン化**: 人格（初心者向け／中級者向け等）を独立したクラスへカプセル化し、拡張性を向上。
- [ ] **解析結果のデータ構造 (DTO) 化**: 生の辞書の代わりに Dataclass を使い、キーの誤記防止と型チェックを実現。
- [ ] **イベント・バス (Pub/Sub) の導入**: コンポーネント間のバケツリレー（callbacks）を廃止し、疎結合な通知システムへ移行。
- [ ] **巨大コントローラー (app.py) の更なる解体**: API連携や状態同期を専門サービスへ委譲。
- [ ] **対局操作の「コマンドパターン」化**: 各操作を Command オブジェクト化し、待った(Undo)や自動再生の実装を容易にする。

## 9. 捨て石の極意 (Sacrifice Logic) [NEW]
...
---
*最終更新: 2026-01-17 (Rev 39.0 Updated)*
