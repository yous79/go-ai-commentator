# 囲碁AI解説システム 統合仕様書 (Gemini.md) - Rev. 36.0

## 0. モデル名称・認識に関する絶対規約
(省略)

## 1. ビジョンと絶対目標
(省略)

## 2. 形状検知ロジック：動的・幾何学的ハイブリッド [REVISED]
形状検知は、静的なパターン照合と、着手の手順を考慮した動的解析のハイブリッド構成とする。

### 2.1 宣言的パターン（静的）
- **データ駆動**: `pattern.json` による幾何学的照合。
- (以下省略)

### 2.2 動的・手順解析（動的）[NEW]
- **手順の考慮**: 特定の形状（ポン抜き、ワリコミ等）の検知において、最新の着手がもたらした「盤面の変化（石の増減）」を必須条件とする。
- **時間軸の論理**: 単なる石の配置だけでなく、「その石がいつ打たれ、何が起きたか」という時間軸の文脈を形状定義に組み込む。

### 2.3 主要形状の厳密定義
- **ポン抜き (Ponnuki)**: 最新手によって相手の石がちょうど1つ抜き去られ、かつダイヤモンド型が完成した状態。相手にこれを許した場合は「深刻な失着」として検知する。
- (サカレ形、二目の頭等の定義は継続)

(中略)

## 6. AI解説生成：事実先行・人格統合プロトコル
- **確定事実の優先**: 解析データ、形状検知結果（動的な手順を含む）、安定度分析、緊急度データをプロンプト最上部に配置。
- (以下省略)

(以下、第7条以降は継続)
